# 스프링의 트랜잭션 관리 

## 트랜잭션 추상화
JDBC, JPA등 데이터 접근 기술이 변경되면, 서비스 계층의 트랜잭션 코드도 함께 수정되야한다. 기술마다 트랜잭션 사용 방법이 다르기 때문이다. 

스프링은 위와 같은 문제를 해결하기 위해 트랜잭션 기술을 추상화 하여 제공하고 데이터 접근 기술에 따라 구현체도 대부분 이미 만들어 두어서 가져다 사용하기만 하면된다. 

스프링 트랜잭션의 추상화 인터페이스는 `PlatformTransactionManager`이다. 

__트랜잭션 구현체__
* DataSourceTransactionManager
* JpaTransactionManager
* HibernateTransactionManager


## 리소스 동기화 

트랜잭션을 유지하려면 트랜잭션의 시작과 끝까지 같은 DB 커넥션(세션)을 유지해야한다.
스프링은 __트랜잭션 동기화 매니저__ 를 제공한다. 쓰레드로컬을 사용해서 커넥션을 동기화 하고 트랜잭션 매니저는 내부에서 이 트랜잭션 동기화 매니저를 사용한다. 

쓰레드로컬을 사용하기 때문에 멀티쓰레드 환경에서 안전하게 커넥션을 동기화할 수 있고 커넥션이 필요하다면 트랜잭션 동기화 매니저를 통해 커넥션을 획득하면 된다. 

__트랜잭션 동기화 매니저 동작 방식__



