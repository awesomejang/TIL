# 예외 추상화 관리 

## 예외의 추상화 
`SQLException`내부에 있는 `errorCode`를 활용하면 데이터베이스에 어떤 문제가 발생했는지 확인 가능하다. 오류 마다 고유 코드가 있고 `errorCode`에서 확인할 수 있는데 같은 오류여도 데이터베이스마다 정의된 오류 코드가 다르다. 

데이터베이스 마다 다른 코드, 오류별 코드등 수십 수백가지 오류 코드가 있는데 이 모든 상황에 맞는 예외를 만들어 대응해야 하는걸까?

__스프링은 위의 문제를 해결하기 위해 데이터 접근과 관련된 예외를 추상화해서 제공한다.__

![](https://media.springernature.com/lw685/springer-static/image/chp%3A10.1007%2F978-1-4842-5136-2_5/MediaObjects/336364_2_En_5_Fig5_HTML.jpg)

스프링은 데이터 접근 계층에 대한 수십 가지 예외를 추상화하여 일관된 예외 계층을 제공한다. 

각각의 예외는 특정 기술에 종속적이지 않게 설계되었기 때문에 서비스 계층에서도 스프링이 제공하는 예외를 사용하면 된다. JDBC든 JPA사용하든 스프링이 제공하는 예외를 사용하면 된다. 

최고 상위 예외는 `DataAccessException`으로 런타임 예외를 상속받았기 때문에 스프링이 제공하는 모든 데이터 접근 계층 예외는 런타임 예외이다. `DataAccessException`은 크게 2가지로 구분하는데 `NonTransient`, `Transient`예외이다. 

* `Transient` : 일시적이라는 뜻으로 상태에 따라 결과가 달라질수도 있는 예외이다. 
    * ex) 쿼리 타임아웃, DB락
* `NonTransient` : 일시적이지 않은 완전한 문제 발생 상황에 따라 달라지지 않은다. 
    * ex) SQL문법 오류, DB 제약조건 위반      



